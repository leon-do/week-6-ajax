<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>

	<div class="bttnDiv"> </div>
	<hr> 
	<input class="inputTxt"> 
	<input type="button" class="addBttn" value="add a tag">
	<hr>
	<div class="gifDiv">  </div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

	<script>
		// link to API:  http://api.giphy.com/v1/gifs/search?q=funny+cat&api_key=dc6zaTOxFJmzC   
// ==========================================

		var myUrl;

// ==========================================

		//make array
		var myArray = ["cat","dog","funny"]

// ==========================================

		// put button on screen using myArray
		for (var i = 0; i < myArray.length; i++){
			$(".bttnDiv").append("<button>" + myArray[i] + "</button>")
		}

// ==========================================

		// add more stuff to array

		// when user clicks on add a tag
		$(".addBttn").on('click',function(){

			var addTag = $(".inputTxt").val().split(" ").join("+") 
				//converts 'funny cat' --> 'funny+cat'
			
			myArray.push(addTag);

			$(".bttnDiv").append("<button>" + addTag + "</button")
		})


// ==========================================



		// onclick, change url name
		$(".bttnDiv").on("click", "button", function(){

			// get tag = cat, dog, funny
			var tag = $(this).text();

			// empty gif Div
			$(".gifDiv").empty();

			// this is the dynamic url
			myUrl = "http://api.giphy.com/v1/gifs/search?q=" + tag + "&api_key=dc6zaTOxFJmzC"




				// display still images
				$.ajax ( { 
						url: myUrl,  
						method: "GET" 
					} ).done(function(response) { 

						//makes 10 gifs
						for (i = 0; i < 10; i++){

							$(".gifDiv").append(
								"<div class=imageAndRating>" +
									"<img class=" + i + 
									" data='off' " +
									" src=" + response.data[i].images.fixed_height_still.url + ">" +
									"<br>" +
									"ratingg: " + response.data[i].rating +
								"</div>" +
								"<hr>")

						}
				});





				//toggle animation
				$(".gifDiv").on("click","img",function(){


					// get class of clicked item. should be 0,1,2,3 etc
					var classNum = $(this).attr('class');
					
					// toggle animation
					$.ajax ( { 
							url: myUrl,  
							method: "GET" 
						} ).done(function(response) { 


							// if data is "off", then turn "on" and animate
							if ($("." + classNum).attr("data") == "off"){
								// turn data on
								$("." + classNum).attr("data","on");
								// animate
								$("." + classNum).attr("src",response.data[classNum].images.fixed_height.url);
							}


							//if data is "on", then turn "off" and pause
							else if ($("." + classNum).attr("data") == "on"){
								// turn data off
								$("." + classNum).attr("data","off");
								// stop animation
								$("." + classNum).attr("src",response.data[classNum].images.fixed_height_still.url);
							}

						})
							

				});//toggle


})//button



	</script>
</body>
</html>